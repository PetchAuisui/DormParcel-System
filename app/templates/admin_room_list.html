{% extends "base.html" %}
{% block content %}
<div class="container mt-5">
  <h2 class="text-center text-primary mb-4">üè† ‡∏´‡πâ‡∏≠‡∏á‡∏û‡∏±‡∏Å‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÉ‡∏ô {{ dorm.name }}</h2>

  <div class="text-end mb-3">
    <a href="{{ url_for('admin_room.room_add', dorm_id=dorm.dorm_id) }}" class="btn btn-success">‚ûï ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏´‡πâ‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà</a>
    <a href="{{ url_for('admin.dorm_list') }}" class="btn btn-secondary">‚Üê ‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏≠‡∏û‡∏±‡∏Å</a>
  </div>

  {% if rooms %}
  <table class="table table-bordered table-hover">
    <thead class="table-light">
      <tr>
        <th>#</th>
        <th>‡∏´‡πâ‡∏≠‡∏á</th>
        <th>‡∏ä‡∏±‡πâ‡∏ô</th>
        <th>‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó</th>
        <th>‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞</th>
        <th>‡∏Å‡∏≤‡∏£‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£</th>
      </tr>
    </thead>
    <tbody>
      {% for room in rooms %}
      <tr>
        <td>{{ loop.index }}</td>
        <td>{{ room.room_number }}</td>
        <td>{{ room.floor }}</td>
        <td>{{ room.type or '-' }}</td>
        <td>
          {% if room.status == 'AVAILABLE' %}
            <span class="badge bg-success">‡∏ß‡πà‡∏≤‡∏á</span>
          {% elif room.status == 'OCCUPIED' %}
            <span class="badge bg-danger">‡∏°‡∏µ‡∏ú‡∏π‡πâ‡∏û‡∏±‡∏Å</span>
          {% else %}
            <span class="badge bg-warning text-dark">‡∏ã‡πà‡∏≠‡∏°‡πÅ‡∏ã‡∏°</span>
          {% endif %}
        </td>
        <td>
          <a href="{{ url_for('admin_room.room_edit', room_id=room.room_id) }}" class="btn btn-warning btn-sm">‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç</a>
          <form action="{{ url_for('admin_room.room_delete', room_id=room.room_id) }}" method="POST" class="d-inline">
            <button type="submit" class="btn btn-danger btn-sm" onclick="return confirm('‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏•‡∏ö‡∏´‡πâ‡∏≠‡∏á‡∏ô‡∏µ‡πâ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?')">‡∏•‡∏ö</button>
          </form>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
  {% else %}
  <div class="alert alert-info text-center">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏´‡πâ‡∏≠‡∏á‡πÉ‡∏ô‡∏´‡∏≠‡∏ô‡∏µ‡πâ</div>
  {% endif %}
</div>
{% endblock %}
